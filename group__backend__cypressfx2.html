<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>glip: Cypress FX2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">glip
   &#160;<span id="projectnumber">0.1.0-dev</span>
   </div>
   <div id="projectbrief">The Generic Logic Interfacing Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>GLIP&#160;Introduction</span></a></li>
      <li><a href="modules.html"><span>Documentation</span></a></li>
      <li><a href="download.html"><span>Download</span></a></li>
      <li><a href="contact.html"><span>Contact</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__backend__cypressfx2.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Cypress FX2<div class="ingroups"><a class="el" href="group__backend.html">Backends</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__backend__cypressfx2-fw"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend__cypressfx2-fw.html">Cypress FX2 Firmware</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__backend__cypressfx2-logic"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend__cypressfx2-logic.html">Cypress FX2 FPGA Logic</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__backend__cypressfx2-sw"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend__cypressfx2-sw.html">Cypress FX2 libglip backend</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Cypress FX2 (internal name: <code>cypressfx2</code>) connects over USB 2.0 to a target device with a <a href="http://www.cypress.com/?id=193">Cypress EZ-USB FX2LP Chip</a> (part numbers CY7C68013A/14/15/16A) on it.</p>
<h1>Supported Features </h1>
<ul>
<li>Number of channels: 1 (fixed)</li>
<li>FIFO width: 16 bit (fixed)</li>
</ul>
<h1>Components </h1>
<p>To make use of this backend, a number of components are required, as shown in the graphic below. </p><pre class="fragment">        Host PC                Cypress FX2              Target FPGA
-----------  ----------       ------------  -----------------------------------
|         |  |        |       |          |  | --------------   -------------- |
| libglip |--| libusb |--USB--| firmware |--| | GLIP logic | - | Your Logic | |
|         |  |        |       |          |  | --------------   -------------- |
-----------  ----------       ------------  -----------------------------------
</pre><p>On the host PC, the <code>cypressfx2</code> backend of libglip internally uses <a href="http://libusb.info">libusb 1.0</a> for all USB communication. This library is available on all major Linux distributions and does not need any kernel components.</p>
<p>The data is then transferred as USB 2.0 bulk transfers to the Cypress FX2 chip, the control signals as USB control transfers. This chip contains a small CPU and needs a special firmware for configuration. This firmware is provided in different flavors by GLIP.</p>
<p>A 16 bit wide parallel interface (plus some control lines) connects the Cypress FX2 chip with your FPGA. For this FPGA GLIP provides a small piece of glue logic, which then provides the common GLIP logic FIFO interface.</p>
<p>For details and usage instructions for the individual components, see these pages:</p><ul>
<li><a class="el" href="group__backend__cypressfx2-sw.html">libglip Backend</a></li>
<li><a class="el" href="group__backend__cypressfx2-fw.html">Cypress FX2 Firmware</a></li>
<li><a class="el" href="group__backend__cypressfx2-logic.html">FPGA Logic</a></li>
</ul>
<h1>Performance </h1>
<p>The <code>cypressfx2</code> libglip backend has been carefully written to provide excellent throughput even for small reads or writes (e.g. calling <a class="el" href="group__communication.html#ga2e5385d600d1df1263517b1879cddaaf">glip_read()</a> with only 6 bytes of data at a time). In loopback tests (user application - FPGA - user application) around 21 MByte/s bi-directional were achieved (i.e. sending 21 MByte/s and at the same time receiving 21 MByte/s). With the theoretical USB 2.0 data rate being 30 MByte/s bi-directional, the achieved data rate is very close to the maximum net data rate.</p>
<p>This performance is achieved by using a double-buffered architecture. All data to be written to the device is first put into a ring buffer, from where it is read in periodic intervals and transferred in large blocks over the USB bus. Data read from the device is handled in the same way. All operations between the libglip API functions and the transfer backend are fully asynchronous with no locking in between.</p>
<p>While this approach results in great throughput performance, the transfer latency can be reduced. A new USB transfer is started if either a sufficient amount of data is available (<code>USB_BUF_SIZE / 2 = 16 kByte</code>) or if a timeout expires. This timeout has been set to 5 milliseconds (see <code>USB_TRANSFER_RETRY_TIMEOUT_MS</code> in backend_cypressfx2.c), i.e. when writing only a small amount of data to the target GLIP waits for 5 ms until the data is sent off to the device. If you need a latency below this threshold, you can lower the timeout value. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jul 8 2015 10:04:03 for glip by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
