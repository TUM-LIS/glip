<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>glip: Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">glip
   &#160;<span id="projectnumber">0.1.0-dev</span>
   </div>
   <div id="projectbrief">The Generic Logic Interfacing Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>GLIP&#160;Introduction</span></a></li>
      <li><a href="examples.html"><span>Demos</span></a></li>
      <li><a href="modules.html"><span>Documentation</span></a></li>
      <li><a href="download.html"><span>Download</span></a></li>
      <li><a href="contact.html"><span>Contact</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__log.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Logging</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga1568e7c249a92297d13819167c2fb663"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#ga1568e7c249a92297d13819167c2fb663">glip_log_fn</a>) (struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *ctx, int priority, const char *file, int line, const char *fn, const char *format, va_list args)</td></tr>
<tr class="separator:ga1568e7c249a92297d13819167c2fb663"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga73d9a5a62ebd7d1c634cd2e29aa7d0fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#ga73d9a5a62ebd7d1c634cd2e29aa7d0fa">glip_set_log_fn</a> (struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *ctx, <a class="el" href="group__log.html#ga1568e7c249a92297d13819167c2fb663">glip_log_fn</a> log_fn)</td></tr>
<tr class="separator:ga73d9a5a62ebd7d1c634cd2e29aa7d0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0b24d15103be9b37f1a037d5855546b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#gad0b24d15103be9b37f1a037d5855546b">glip_get_log_priority</a> (struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *ctx)</td></tr>
<tr class="separator:gad0b24d15103be9b37f1a037d5855546b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63ef7abf50c1f40cf71e336485ebe155"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#ga63ef7abf50c1f40cf71e336485ebe155">glip_set_log_priority</a> (struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *ctx, int priority)</td></tr>
<tr class="separator:ga63ef7abf50c1f40cf71e336485ebe155"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>GLIP emits log messages in many cases to help to find problems both during development as well during usage. A configurable logging mechanism allows you to redirect, filter and/or discard the messages based on your application's needs.</p>
<p>GLIP supports three levels of log messages (out of the set defined in <code>syslog.h</code>):</p><ul>
<li>errors (<code>LOG_ERR</code>)</li>
<li>information (<code>LOG_INFO</code>)</li>
<li>debug messages (<code>LOG_DEBUG</code>)</li>
</ul>
<p>The logging is controlled at build time of the library as well as at runtime. You can set the destination of the log message (i.e. stdout/stderr or a custom message handler) as well as the log level, i.e. which messages are discarded and which are actually logged.</p>
<p>When building glip, two configure options are relevant:</p>
<ul>
<li>
<pre>--enable-logging/--disable-logging</pre> Enable/disable any logging infrastructure </li>
<li>
<pre>--enable-debug/--disable-debug</pre> Enable debug code and debug log messages </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>All debugging log messages require debug support to be enabled at build time of GLIP!</dd></dl>
<p>Library users can modify the log level through he functions <a class="el" href="group__log.html#gad0b24d15103be9b37f1a037d5855546b">glip_get_log_priority()</a> and <a class="el" href="group__log.html#ga63ef7abf50c1f40cf71e336485ebe155">glip_set_log_priority()</a>.</p>
<p>The end-user of an application using GLIP can modify the log level by setting the <code>GLIP_LOG</code> environment variable to one of the possible log levels to restrict the log output to messages of that level and above. Allowed values for the <code>GLIP_LOG</code> environment variable are:</p><ul>
<li><pre>err</pre></li>
<li><pre>info</pre></li>
<li><pre>debug</pre></li>
</ul>
<p>In many cases your application using GLIP already has some kind of logging framework in place. In this case, you can route the log messages generated by GLIP to your own logging framework, show them in the user interface, etc. First, create a function matching the <a class="el" href="group__log.html#ga1568e7c249a92297d13819167c2fb663">glip_log_fn()</a> signature. Then, tell GLIP to use this function as destination for all log messages by registering it with <a class="el" href="group__log.html#ga73d9a5a62ebd7d1c634cd2e29aa7d0fa">glip_set_log_fn()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>It is not possible to redirect messages created by <a class="el" href="group__library-init-deinit.html#ga07ef447749459259d67ef538a1e68ad8">glip_new()</a> to your own logging function; those messages will always be handled by the default log message handler. </dd></dl>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga1568e7c249a92297d13819167c2fb663"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* glip_log_fn) (struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *ctx, int priority, const char *file, int line, const char *fn, const char *format, va_list args)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logging function template</p>
<p>Implement a function with this signature and pass it to <a class="el" href="group__log.html#ga73d9a5a62ebd7d1c634cd2e29aa7d0fa">glip_set_log_fn()</a> if you want to implement custom logging. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga73d9a5a62ebd7d1c634cd2e29aa7d0fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void glip_set_log_fn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__log.html#ga1568e7c249a92297d13819167c2fb663">glip_log_fn</a>&#160;</td>
          <td class="paramname"><em>log_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set logging function</p>
<p>The built-in logging writes to STDERR. It can be overridden by a custom function to log messages into the user's logging functionality.</p>
<p>In many cases you want the log message to be associated with a context or object of your application, i.e. the object that uses GLIP. In this case, set the context or <code>this</code> pointer with <a class="el" href="group__utilities.html#ga98d2a949b22dce1b77c81e77b60400ea">glip_set_caller_ctx()</a> and retrieve it inside your <code>log_fn</code>.</p>
<p>An example in C++ could look like this: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> MyClass::glipLogCallback(<span class="keyword">struct</span> <a class="code" href="structglip__ctx.html">glip_ctx</a> *gctx,</div>
<div class="line">                                     <span class="keywordtype">int</span> priority, <span class="keyword">const</span> <span class="keywordtype">char</span> *file,</div>
<div class="line">                                     <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span> *fn,</div>
<div class="line">                                     <span class="keyword">const</span> <span class="keywordtype">char</span> *format, va_list args)</div>
<div class="line">{</div>
<div class="line">  MyClass *myclassptr = <span class="keyword">static_cast&lt;</span>MyClass*<span class="keyword">&gt;</span>(<a class="code" href="group__utilities.html#ga2f8b56eb0decc2e9f69b78d64cb3c1fd">glip_get_caller_ctx</a>(gctx));</div>
<div class="line">  myclassptr-&gt;doLogging(format, args);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">MyClass::MyClass()</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line">  <a class="code" href="group__utilities.html#ga98d2a949b22dce1b77c81e77b60400ea">glip_set_caller_ctx</a>(gctx, <span class="keyword">this</span>);</div>
<div class="line">  <a class="code" href="group__log.html#ga73d9a5a62ebd7d1c634cd2e29aa7d0fa">glip_set_log_fn</a>(&amp;MyClass::glipLogCallback);</div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">MyClass::doLogging(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, va_list args)</div>
<div class="line">{</div>
<div class="line">   printf(<span class="stringliteral">&quot;this = %p&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line">   vprintf(format, args);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the library context </td></tr>
    <tr><td class="paramname">log_fn</td><td>the used logging function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad0b24d15103be9b37f1a037d5855546b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int glip_get_log_priority </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the logging priority</p>
<p>The logging priority is the lowest message type that is reported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the library context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the log priority</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__log.html#ga63ef7abf50c1f40cf71e336485ebe155">glip_set_log_priority()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga63ef7abf50c1f40cf71e336485ebe155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void glip_set_log_priority </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structglip__ctx.html">glip_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the logging priority</p>
<p>The logging priority is the lowest message type that is reported.</p>
<p>Allowed values for <code>priority</code> are <code>LOG_DEBUG</code>, <code>LOG_INFO</code> and <code>LOG_ERR</code> as defined in <code>syslog.h</code>.</p>
<p>For example setting <code>priority</code> will to <code>LOG_INFO</code> will result in all error and info messages to be shown, and all debug messages to be discarded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the library context </td></tr>
    <tr><td class="paramname">priority</td><td>new priority value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__log.html#gad0b24d15103be9b37f1a037d5855546b">glip_get_log_priority()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Aug 11 2016 11:09:43 for glip by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
